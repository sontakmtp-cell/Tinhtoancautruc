<svg width="100%" height="100%" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg" style="background-color: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; font-family: 'Inter', sans-serif;">
  <!--
    Hình chiếu bằng cầu trục - Phiên bản cải tiến
    - Động cơ được gắn vào dầm biên, truyền động đến bánh xe chủ động ở đầu dầm.
    - Phân biệt rõ bánh xe chủ động và bánh xe bị động.
    Dựa trên các biến từ file EdgeBeamCalculator.tsx:
    - S: Khẩu độ cầu trục (19.7 m)
    - x: Tâm xe con đến tâm ray dầm biên (2 m)
    - B: Bề rộng ray (80 mm)
  -->
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4b5563" />
    </marker>
    <pattern id="hatch" patternUnits="userSpaceOnUse" width="8" height="8">
        <path d="M-2,2 l4,-4 M0,8 l8,-8 M6,10 l4,-4" stroke="#9ca3af" stroke-width="0.5"/>
    </pattern>
  </defs>

  <style>
    .label {
      font-size: 15px;
      font-weight: 500;
      fill: #1f2937;
    }
    .param-label {
      font-size: 15px;
      font-weight: 600;
      fill: #1d4ed8;
    }
    .main-component {
      fill: #e5e7eb;
      stroke: #6b7280;
      stroke-width: 1.5;
    }
    .drive-component {
      fill: #bfdbfe;
      stroke: #2563eb;
      stroke-width: 1.5;
    }
    .wheel-component {
        fill: #d1d5db;
        stroke: #4b5563;
        stroke-width: 1;
    }
    .drive-wheel-component {
        fill: #93c5fd;
        stroke: #2563eb;
        stroke-width: 1.5;
    }
    .trolley-component {
      fill: #c7d2fe;
      stroke: #4f46e5;
      stroke-width: 1.5;
    }
    .dim-line {
      stroke: #4b5563;
      stroke-width: 1.5;
      marker-start: url(#arrow);
      marker-end: url(#arrow);
    }
    .ext-line {
      stroke: #9ca3af;
      stroke-width: 1;
      stroke-dasharray: 4 4;
    }
    .transmission-shaft {
        stroke: #6b7280;
        stroke-width: 4;
        stroke-linecap: round;
    }
  </style>

  <!-- Tiêu đề -->
  <text x="450" y="40" text-anchor="middle" font-size="20" font-weight="600" fill="#111827">Sơ Đồ Cầu Trục - Hình Chiếu Bằng</text>

  <!-- Ray -->
  <g id="rail-group">
    <rect x="110" y="50" width="20" height="500" fill="url(#hatch)" stroke="#4b5563"/>
    <rect x="110" y="50" width="20" height="500" fill="none" stroke="#4b5563" stroke-width="1.5"/>
    <text x="80" y="300" class="label" text-anchor="middle" transform="rotate(-90, 80, 300)">Ray trái</text>
    
    <rect x="770" y="50" width="20" height="500" fill="url(#hatch)" stroke="#4b5563"/>
    <rect x="770" y="50" width="20" height="500" fill="none" stroke="#4b5563" stroke-width="1.5"/>
    <text x="820" y="300" class="label" text-anchor="middle" transform="rotate(90, 820, 300)">Ray phải</text>
  </g>

  <!-- Cầu trục -->
  <g id="crane-bridge">
    <!-- Dầm biên -->
    <rect x="100" y="150" width="40" height="300" class="main-component"/>
    <rect x="760" y="150" width="40" height="300" class="main-component"/>
    <text x="120" y="135" text-anchor="middle" class="label">Dầm biên</text>

    <!-- Bánh xe -->
    <g id="wheels">
        <!-- Left Wheels -->
        <rect x="108" y="160" width="24" height="40" rx="4" class="drive-wheel-component"/>
        <rect x="108" y="240" width="24" height="40" rx="4" class="wheel-component"/>
        <rect x="108" y="320" width="24" height="40" rx="4" class="wheel-component"/>
        <rect x="108" y="400" width="24" height="40" rx="4" class="wheel-component"/>
        <!-- Right Wheels -->
        <rect x="768" y="160" width="24" height="40" rx="4" class="drive-wheel-component"/>
        <rect x="768" y="240" width="24" height="40" rx="4" class="wheel-component"/>
        <rect x="768" y="320" width="24" height="40" rx="4" class="wheel-component"/>
        <rect x="768" y="400" width="24" height="40" rx="4" class="wheel-component"/>
    </g>

    <!-- Động cơ & Hệ thống truyền động -->
     <g id="drive-system">
        <!-- Left Drive -->
        <g id="left-drive">
            <rect x="50" y="155" width="50" height="50" rx="5" class="drive-component"/>
            <rect x="90" y="170" width="20" height="20" rx="3" class="drive-component" fill="#93c5fd"/>
            <line x1="110" y1="180" x2="120" y2="180" class="transmission-shaft"/>
            <text x="75" y="220" text-anchor="middle" font-size="12" class="label">Động cơ</text>
        </g>
        <!-- Right Drive -->
        <g id="right-drive">
            <rect x="800" y="155" width="50" height="50" rx="5" class="drive-component"/>
            <rect x="790" y="170" width="20" height="20" rx="3" class="drive-component" fill="#93c5fd"/>
            <line x1="790" y1="180" x2="780" y2="180" class="transmission-shaft"/>
        </g>
    </g>

    <!-- Dầm chính -->
    <rect x="140" y="280" width="620" height="40" class="main-component"/>
    <text x="450" y="270" text-anchor="middle" class="label">Dầm chính</text>
  </g>

  <!-- Xe con -->
  <g id="trolley">
    <!-- Vị trí xe con được tính toán tỉ lệ: S_px=640, S_m=19.7 -> x_px = (2/19.7)*640 ~ 65px -->
    <rect x="185" y="260" width="80" height="80" class="trolley-component"/>
    <line x1="225" y1="260" x2="225" y2="230" class="ext-line" stroke="#4f46e5"/>
    <text x="225" y="220" text-anchor="middle" class="label" fill="#4f46e5">Xe con</text>
  </g>

  <!-- Kích thước -->
  <g id="dimensions">
    <!-- Kích thước S (Khẩu độ) -->
    <line x1="120" y1="500" x2="780" y2="500" class="dim-line"/>
    <line x1="120" y1="450" x2="120" y2="510" class="ext-line"/>
    <line x1="780" y1="450" x2="780" y2="510" class="ext-line"/>
    <text x="450" y="485" text-anchor="middle" class="param-label">S = 19.7 m</text>
    <text x="450" y="525" text-anchor="middle" class="label">(Khẩu độ cầu trục)</text>
    
    <!-- Kích thước x (Vị trí xe con) -->
    <line x1="120" y1="80" x2="225" y2="80" class="dim-line"/>
    <line x1="120" y1="70" x2="120" y2="150" class="ext-line"/>
    <line x1="225" y1="70" x2="225" y2="260" class="ext-line"/>
    <text x="172.5" y="70" text-anchor="middle" class="param-label">x = 2 m</text>
    <text x="172.5" y="105" text-anchor="middle" class="label">(Tâm xe con)</text>
    
    <!-- Kích thước B (Bề rộng ray) -->
    <line x1="110" y1="50" x2="110" y2="30" class="ext-line"/>
    <line x1="130" y1="50" x2="130" y2="30" class="ext-line"/>
    <line x1="110" y1="40" x2="130" y2="40" class="dim-line"/>
    <text x="120" y="28" text-anchor="middle" font-size="10" class="param-label">B=80mm</text>

    <!-- Tâm ray -->
    <line x1="120" y1="50" x2="120" y2="550" stroke="#3b82f6" stroke-width="1" stroke-dasharray="5 5"/>
    <text x="120" y="565" text-anchor="middle" font-size="10" fill="#3b82f6">Tâm ray</text>
    <line x1="780" y1="50" x2="780" y2="550" stroke="#3b82f6" stroke-width="1" stroke-dasharray="5 5"/>
    <text x="780" y="565" text-anchor="middle" font-size="10" fill="#3b82f6">Tâm ray</text>

  </g>
</svg>

